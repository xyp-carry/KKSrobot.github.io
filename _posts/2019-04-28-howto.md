---
title: 如何使用
author: Xiang Yu Ping
date: 2012-04-28
category: Jekyll
layout: post
---

## 模型参数配置
在/config/config.json中配置
```python
{
    "base_url": "https://open.bigmodel.cn/api/paas/v4/",
    "chatmodel":"glm-4.7"
    "api_key": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "flash_base_url": "https://open.bigmodel.cn/api/paas/v4/", # 建议使用更小更快的模型
    "flash_api_key": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "flash_model": "glm-4.7-flash"
    
}
```
## 后台代码部分操作示例
### 插入数据
```python
# 在根目录下执行
from KKSrag.KKStool import KKSTokenizer, FileReader, KKSEmbedding
from KKSrag.KKSContentDB import KKSContentDB
Tokenizer = KKSTokenizer()
data = ["我爱中国","苹果是一个非常好吃的水果"]
filedir = "KKSContentDB"
# 不包含语义模型
ad = KKSContentDB(Tokenizer, filedir)
ad.insert_ad(data)
# 包含语义模型
Embedding = KKSEmbedding()
ad = KKSContentDB(Tokenizer, filedir, Embedding)
ad.insert_ad(data)
```

### 删除数据
```python
# 在根目录下执行
from KKSrag.KKStool import KKSTokenizer, FileReader, KKSEmbedding
from KKSrag.KKSContentDB import KKSContentDB
data = [{"id":"0"},{"id":"1"}]
filedir = "KKSContentDB"
# 不包含语义模型
ad = KKSContentDB(Tokenizer, filedir)
ad.delete_ad(data)
```

## 运行KKSRAG服务
```python
python main.py
# 运行服务后运行客户端，嵌入模型可能存在网络问题无法下载，建议使用代理
cd server
python server.py
# 而后可按页面指示操作，提示：最好都将左侧的嵌入模型勾选上
```

## KKSwx使用示例

```
# 示例，在KKSwx的目录下执行
from KKShandler.KKSwx import KKSWx

KKSwx = KKSWx()


"""获取指定窗口的历史记录"""
hwnd = KKSwx.phandler.find_all_windows_by_keyword("robot_test")[0]['hwnd']
history = KKSwx.get_history(hwnd, roll_times=5)
print(history)


"""发送文本到指定窗口"""
KKSwx.send_text(hwnd, '你好')



"""监测指定窗口的新消息，键盘输入ctrl+alt+q退出"""
wxqueue = [[]]
"""
name : List[str]
answerlabel : str 根据标签表示是否让AI回答问题
only_monitor : bool 是否只监测窗口，不发送文本
"""
KKSwx.start(wxqueues= wxqueue,name=['robot_test'], answerlabel='@', only_monitor=True)

```
